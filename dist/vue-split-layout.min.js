!function(e,t){"object"==typeof exports&&typeof module<"u"?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e=typeof globalThis<"u"?globalThis:e||self).VueSplitLayout={},e.Vue)}(this,(function(e,t){"use strict";var i=Object.defineProperty;const r=(e,t)=>{const i=e.__vccOpts||e;for(const[e,r]of t)i[e]=r;return i},n={name:"Split",props:{resizeable:{type:Boolean,default:!1},dir:{type:String,default:"horizontal"},split:{type:String,default:"50%"}},data(){return{state:{resizing:!1,split:this.split}}},computed:{splitClass(){return["split",this.dir,this.state.resizing?"resizing":"",this.resizeable?"resizeable":""]}},methods:{startResize(e){if(!this.resizeable||0!==e.button)return;e.preventDefault(),this.state.resizing=!0;const t=e=>{const t="horizontal"===this.dir,i=(t?this.$el.children[1].clientWidth:this.$el.children[1].clientHeight)/2,r=this.$el.getBoundingClientRect(),n=t?(e.clientX-r.left-i)/this.$el.clientWidth*100:(e.clientY-r.top-i)/this.$el.clientHeight*100;this.state.split=n+"%"},i=()=>{this.state.resizing=!1,document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",t),document.addEventListener("mouseup",i)}}},s={class:"content"};const o=r(n,[["render",function(e,i,r,n,o,l){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(l.splitClass)},[t.createElementVNode("div",{class:"content",style:t.normalizeStyle({"flex-basis":o.state.split})},[t.renderSlot(e.$slots,"first",{},void 0,!0)],4),t.createElementVNode("div",{class:"splitter",onMousedown:i[0]||(i[0]=(...e)=>l.startResize&&l.startResize(...e))},null,32),t.createElementVNode("div",s,[t.renderSlot(e.$slots,"second",{},void 0,!0)])],2)}],["__scopeId","data-v-af012366"]]),l=class e{constructor(e){this.tree=e||[]}push(t){return void 0===t.id&&(t.id=e.gid++),this.tree.push(t),t}findById(e){return this.tree.find((t=>t.id===e))}childrenOf(e){return this.tree.filter((t=>t.parent===e))}attachChild(t,i,r,n){void 0===r.id&&(r.id=e.gid++),n=n||33;const s=this.tree.indexOf(t),o={id:e.gid++,type:"split",parent:t.parent,dir:i%2==0?"vertical":"horizontal"};return t.parent=o,r.parent=o,this.tree[s]=o,0===i||3===i?(o.split=n+"%",this.tree.push(r,t)):(o.split=100-n+"%",this.tree.push(t,r)),r}};((e,t,r)=>{((e,t,r)=>{t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(l,"gid",0);let d=l;d.from=function(e){return new d(e)};const a={name:"Layout",props:{edit:{type:Boolean,default:!0},resize:{type:Boolean,default:!0},splits:{type:[String,Number,Object],default:()=>({})}},data(){return{nodes:this.calcSplits(),drag:null,savedNodes:null}},computed:{layoutClass(){return{"layout-container":!0,"edit-mode":this.edit,"drag-mode":!!this.drag}}},watch:{splits(){this.nodes=this.calcSplits()}},beforeUpdate(){if(!this.$refs.container)return;const e=this.$refs.container.querySelectorAll("[target-view]");Array.from(e).forEach((e=>{const t=this.$refs.container.querySelector(`[src-view=${e.getAttribute("target-view")}]`);t&&t.children[0]&&t.appendChild(e.children[0])}))},methods:{calcSplits(){const e=[],t=d.from(e),i=e=>{if(e instanceof Object){const r=t.push({type:"split",dir:e.dir,split:e.split});return i(e.first).parent=r,i(e.second).parent=r,r}return t.push({type:"view",viewId:e})};return i(this.splits),e},childrenOf(e){return d.from(this.nodes).childrenOf(e)},renderNode:e=>"split"===e.type?o:"div",onSplitResize(e,t,i){const r=t.props["node-id"];d.from(this.nodes).findById(r).split=i},previewPane(e,t,i){if(-1===e)return void(this.$refs.preview.style.opacity=0);if(!t)return-1;const r=(i=i||33)/100,n=t.getBoundingClientRect(),s={left:n.left,top:n.top,width:n.width,height:n.height};1===e?s.left+=s.width-s.width*r:2===e&&(s.top+=s.height-s.height*r),e%2==0?s.height*=r:s.width*=r,this.$refs.preview.style.opacity=1;for(const e in s)this.$refs.preview.style[e]=`${s[e]}px`},onViewDragStart(e){if(0!==e.button)return;const t=e.target.hasAttribute("node-id"),i=e.target.hasAttribute("pane-drag");if(!t&&!i)return;let r=e.target;if(!t){let e=r;for(;e&&e.matches&&!e.hasAttribute("node-id");)e=e.parentNode;if(!e||!e.matches)return;r=e}const n=parseInt(r.getAttribute("node-id"),10),s=this.nodes.find((e=>e.id===n));if(!s)return;e.preventDefault();const o=this.$refs.container.getBoundingClientRect(),l=e.target.getBoundingClientRect();this.drag={node:s,offset:{x:e.clientX-l.left,y:e.clientY-l.top}},this.savedNodes=structuredClone(this.nodes),d.from(this.nodes).removeChild(s),this.$refs.drag.style.top=l.y-o.top+"px",this.$refs.drag.style.left=l.x-o.left+"px",this.$refs.drag.style.width=`${l.width}px`,this.$refs.drag.style.height=`${l.height}px`,document.addEventListener("mousemove",this.onViewDrag),document.addEventListener("mouseup",this.onViewDrop)},onViewDrag(e){if(0!==e.button)return;const t=this.$refs.container.getBoundingClientRect(),i=e.clientX-t.left,r=e.clientY-t.top;this.$refs.drag.style.left=i-this.drag.offset.x+"px",this.$refs.drag.style.top=r-this.drag.offset.y+"px",this.$refs.drag.style.pointerEvents="none";const n=document.elementFromPoint(e.clientX,e.clientY);this.$refs.drag.style.pointerEvents=null;let s=n;for(;s&&!s.matches(".view");)s=s.parentNode;if(!s||!s.matches)return void this.previewPane(-1);const o=this.checkAttach(s,e);-1!==o&&(this.drag.over={viewDom:s,attach:o}),this.previewPane(o,s)},onViewDrop(e){if(0!==e.button)return;if(document.removeEventListener("mousemove",this.onViewDrag),document.removeEventListener("mouseup",this.onViewDrop),this.previewPane(-1),!this.drag.over)return this.drag=null,void(this.nodes=this.savedNodes);const{viewDom:t,attach:i}=this.drag.over,r=parseInt(t.getAttribute("node-id"),10),n=d.from(this.nodes),s=n.findById(r);n.attachChild(s,i,this.drag.node),this.drag=null},checkAttach(e,t,i=33){const r=i/100,n=e.getBoundingClientRect(),s=n.width*r,o=n.height*r,l=t.clientX-n.left,d=t.clientY-n.top,a=[d-o,n.width-s-l,n.height-o-d,l-s];let c=0,h=-1;return a.forEach(((e,t)=>{e<c&&(c=e,h=t)})),h}}},c={class:"preview",ref:"preview"},h=["target-view"],p={style:{display:"none"}};const u=r(a,[["render",function(e,i,r,n,s,o){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(o.layoutClass),ref:"container"},[t.createElementVNode("div",{class:t.normalizeClass(["views",{dragging:!!s.drag}]),ref:"views"},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(o.childrenOf(s.nodes[0]),(e=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(o.renderNode(e)),{key:e.id})))),128))],2),t.createElementVNode("div",c,null,512),t.createElementVNode("div",{class:t.normalizeClass({drag:!0,dragging:!!s.drag}),ref:"drag"},[s.drag?(t.openBlock(),t.createElementBlock("div",{key:0,class:"view","target-view":"view-"+s.drag.node.viewId},null,8,h)):t.createCommentVNode("",!0)],2),t.createElementVNode("div",p,[t.renderSlot(e.$slots,"default")])],2)}]]),f={class:"pane"},g={class:"header"},v={class:"content"};const m=r({name:"Pane",props:{title:{type:String,default:""}}},[["render",function(e,i,r,n,s,o){return t.openBlock(),t.createElementBlock("div",f,[t.createElementVNode("div",g,t.toDisplayString(r.title),1),t.createElementVNode("div",v,[t.renderSlot(e.$slots,"default",{},void 0,!0)])])}],["__scopeId","data-v-2502aea4"]]);e.Layout=u,e.Pane=m,e.Split=o,e.Tree=d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=vue-split-layout.min.js.map
